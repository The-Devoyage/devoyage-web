"use strict";(self.webpackChunkdevoyage_web=self.webpackChunkdevoyage_web||[]).push([[863],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(n),f=r,y=u["".concat(l,".").concat(f)]||u[f]||c[f]||o;return n?i.createElement(y,a(a({ref:t},d),{},{components:n})):i.createElement(y,a({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var p=2;p<o;p++)a[p]=n[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2356:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var i=n(7462),r=(n(7294),n(3905));const o={id:"associations",title:"Associations"},a=void 0,s={unversionedId:"entities/fields/associations",id:"entities/fields/associations",title:"Associations",description:"Extending an Entity",source:"@site/subgraph/05-entities/02-fields/09-associations.md",sourceDirName:"05-entities/02-fields",slug:"/entities/fields/associations",permalink:"/subgraph/entities/fields/associations",draft:!1,editUrl:"https://www.github.com/The-Devoyage/devoyage-web/blob/master/subgraph/05-entities/02-fields/09-associations.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{id:"associations",title:"Associations"},sidebar:"subgraphSidebar",previous:{title:"Field Guards",permalink:"/subgraph/entities/fields/field-guards"},next:{title:"Eager Loading",permalink:"/subgraph/entities/fields/eager-loading"}},l={},p=[{value:"Extending an Entity",id:"extending-an-entity",level:2},{value:"As Type",id:"as-type",level:3},{value:"Join From",id:"join-from",level:3},{value:"Join On",id:"join-on",level:3},{value:"Querying",id:"querying",level:3}],d={toc:p};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"extending-an-entity"},"Extending an Entity"),(0,r.kt)("p",null,"One of the most powerful concepts with GraphQL is the ability to create associations between almost\nany entity."),(0,r.kt)("p",null,"Create associations with Subgraph by providing two to three properties to the field configuration to describe\nthe association."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[[service.entities.fields]]\nname = "created_by" # A custom name\nscalar = "Int" # The type of the reference.\nas_type = "user" # The name of the entity to associate.\njoin_on = "todo_id" # The property on the entity of which to associate with.\njoin_from = "id" # The property from the parent entity.\n')),(0,r.kt)("h3",{id:"as-type"},"As Type"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"as_type")," field is required when extending an entity. This field must be equal to the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," value of any other\nentity in the subgraph config, regardless of data source."),(0,r.kt)("h3",{id:"join-from"},"Join From"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"join_from")," field is used to determine the source key of which to use in order to associate the current entity to\nthe foreign entity. This is an optional property, which defaults to the current field name if not provided."),(0,r.kt)("h3",{id:"join-on"},"Join On"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"join_on")," field references the property of which will be equivalanet to the ",(0,r.kt)("inlineCode",{parentName:"p"},"join_from")," field."),(0,r.kt)("h3",{id:"querying"},"Querying"),(0,r.kt)("p",null,"Once the ",(0,r.kt)("inlineCode",{parentName:"p"},"join_on")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"as_type")," fields have been defined, with the optional ",(0,r.kt)("inlineCode",{parentName:"p"},"join_from")," field, you can then\nquery data of associated entities within a single network request."),(0,r.kt)("p",null,'The following query returns "todos" extended by a user on the ',(0,r.kt)("inlineCode",{parentName:"p"},"created_by")," property."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},"query TodosListGetTodos($get_todos_input: get_todos_input!) {\n  get_todos(get_todos_input: $get_todos_input) {\n    uuid\n    created_by(created_by: $get_user_input) {\n      uuid\n      identifier\n      profile_img\n    }\n  }\n}\n")))}c.isMDXComponent=!0}}]);