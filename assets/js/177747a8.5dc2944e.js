"use strict";(self.webpackChunkdevoyage_web=self.webpackChunkdevoyage_web||[]).push([[495],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=p(n),h=a,m=d["".concat(u,".").concat(h)]||d[h]||c[h]||i;return n?r.createElement(m,o(o({ref:t},s),{},{components:n})):r.createElement(m,o({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2220:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={id:"built-in-functions",title:"Built In Functions"},o=void 0,l={unversionedId:"expressions/built-in-functions",id:"expressions/built-in-functions",title:"Built In Functions",description:"Subgraph Provided Functions",source:"@site/subgraph/11-expressions/02-built-in-functions.md",sourceDirName:"11-expressions",slug:"/expressions/built-in-functions",permalink:"/subgraph/expressions/built-in-functions",draft:!1,editUrl:"https://www.github.com/The-Devoyage/devoyage-web/blob/master/subgraph/11-expressions/02-built-in-functions.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"built-in-functions",title:"Built In Functions"},sidebar:"subgraphSidebar",previous:{title:"The EvalExpr Crate",permalink:"/subgraph/expressions/eval-expr"},next:{title:"Examples",permalink:"/subgraph/category/examples"}},u={},p=[{value:"Subgraph Provided Functions",id:"subgraph-provided-functions",level:2},{value:"The <code>headers</code> Function",id:"the-headers-function",level:3},{value:"The <code>input</code> Function",id:"the-input-function",level:3},{value:"The <code>token_data</code> Function",id:"the-token_data-function",level:3},{value:"The <code>resolver_type</code> Function",id:"the-resolver_type-function",level:3},{value:"The <code>context</code> Function",id:"the-context-function",level:3}],s={toc:p};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"subgraph-provided-functions"},"Subgraph Provided Functions"),(0,a.kt)("p",null,"Subgraph extends the built in functions provided by the EvalExpr crate in order to allow you to interact with data in relation to the context of a request. This\nenables expressions to be constructed based conditionally on data from the API and the user performing the request."),(0,a.kt)("h3",{id:"the-headers-function"},"The ",(0,a.kt)("inlineCode",{parentName:"h3"},"headers")," Function"),(0,a.kt)("p",null,"Extracts a singluar value from the headers of a request to use in an expression. Provide the key of the header property that should be extracted."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Usage:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'input("Authorization")')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'input("Content-Type")'))),(0,a.kt)("p",null,"Returns a string value."),(0,a.kt)("h3",{id:"the-input-function"},"The ",(0,a.kt)("inlineCode",{parentName:"h3"},"input")," Function"),(0,a.kt)("p",null,"Extracts a vector or tuple of values that come from the client provided graphql input. Provide the root object and the key of the input value to be extracted."),(0,a.kt)("p",null,"Since input objects may define more than one of the same value, this function extracts all occurrences into a vector/array."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "get_users_input": {\n    "query": {\n      "OR": [{ "title": "Hello" }, { "title": "World" }]\n    }\n  }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'input(\\"query\\", \\"comments.title\\")'))),(0,a.kt)("p",null,"Returns a vector of values. For example: ",(0,a.kt)("inlineCode",{parentName:"p"},'["Hello", "World"]'),"."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Note: Syntax is subject to change to a single argument with dot separated notation in future update. Currently you must specify if the\nvalue should originate from the query input or values input.")),(0,a.kt)("h3",{id:"the-token_data-function"},"The ",(0,a.kt)("inlineCode",{parentName:"h3"},"token_data")," Function"),(0,a.kt)("p",null,"Extracts a single value from the auth ",(0,a.kt)("inlineCode",{parentName:"p"},"token_data"),". Provide the key of which vale you wish to extract."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Usage:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'token_data("user_uuid")')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'token_data("identifier")'))),(0,a.kt)("p",null,"Returns a single string value."),(0,a.kt)("h3",{id:"the-resolver_type-function"},"The ",(0,a.kt)("inlineCode",{parentName:"h3"},"resolver_type")," Function"),(0,a.kt)("p",null,"Returns the action being performed based on the type of resolver."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Usage:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'resolver_type() == "FindOne"')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'resolver_type() == "FindMany"')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'resolver_type() == "UpdateOne"')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'resolver_type() == "UpdateMany"')),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'resolver_type() == "CreateOne"'))),(0,a.kt)("h3",{id:"the-context-function"},"The ",(0,a.kt)("inlineCode",{parentName:"h3"},"context")," Function"),(0,a.kt)("p",null,"Extracts a vector or tuple of values that come from the guard generated context."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Usage:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'context("user.id")'))),(0,a.kt)("p",null,"The key passed in as an argument needs to match the ",(0,a.kt)("inlineCode",{parentName:"p"},"name")," of the given ",(0,a.kt)("a",{parentName:"p",href:"/subgraph/guards/guard-data-context"},"guard context")," that is defined with the associated guard."),(0,a.kt)("p",null,"Returns a vector of values associated with the key provided, in similar fashion to the input function shown above."))}c.isMDXComponent=!0}}]);