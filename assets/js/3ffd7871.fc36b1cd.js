"use strict";(self.webpackChunkdevoyage_web=self.webpackChunkdevoyage_web||[]).push([[5431],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(a),h=r,g=d["".concat(l,".").concat(h)]||d[h]||c[h]||o;return a?n.createElement(g,i(i({ref:t},p),{},{components:a})):n.createElement(g,i({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8249:(e,t,a)=>{a.d(t,{U:()=>o});var n=a(7294),r=a(9960);const o=()=>n.createElement("div",{className:"alert alert--info margin-vert--lg",style:{display:"flex",justifyContent:"space-between",flexDirection:"column"}},n.createElement("div",{className:"avatar"},n.createElement("a",{className:"avatar__photo-link avatar__photo avatar__photo--lg",href:"https://medium.com/@thedevoyage"},n.createElement("img",{alt:"Nick McLean Profile Image",src:"https://cdn-images-1.medium.com/fit/c/63/63/1*TY45PiqMrWiUkivbhmp-Sw.jpeg"})),n.createElement("div",{className:"avatar__intro"},n.createElement("div",{className:"avatar__name"},"Nick McLean"),n.createElement("small",{className:"avatar__subtitle padding-bottom--md"},"Thanks for following along. If you would like to keep up to date make sure to check in frequently and/or follow us below!"),n.createElement("div",null,[{to:"https://medium.com/@thedevoyage",label:"Medium"},{to:"https://twitter.com/thedevoyage",label:"Twitter"},{to:"https://thedevoyage.slack.com",label:"Slack"}].map((e=>n.createElement(r.Z,{to:e.to,key:e.to},n.createElement("button",{className:"button button--primary margin-right--md"},e.label))))))))},4399:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(7462),r=(a(7294),a(3905)),o=a(8249);const i={title:"Subgraph v0.0.8 - Instant SQL API with Subgraph",slug:"subgraph-v0.0.8-instant-sql-api",authors:["nick"],tags:["subgraph"],date:new Date("2023-05-01T00:00:00.000Z"),description:"Create a nearly instant API for your SQL Database with Subgraph v0.0.8.",image:"https://res.cloudinary.com/the-devoyage/image/upload/v1683081810/Subgraph_SQL_kteswo.png",keywords:["graphql","subgraph","api","api generator"]},s=void 0,l={permalink:"/blog/subgraph-v0.0.8-instant-sql-api",editUrl:"https://www.github.com/The-Devoyage/devoyage-web/blob/master/blog/subgraph-v0.0.8/index.md",source:"@site/blog/subgraph-v0.0.8/index.md",title:"Subgraph v0.0.8 - Instant SQL API with Subgraph",description:"Create a nearly instant API for your SQL Database with Subgraph v0.0.8.",date:"2023-05-01T00:00:00.000Z",formattedDate:"May 1, 2023",tags:[{label:"subgraph",permalink:"/blog/tags/subgraph"}],readingTime:5.615,hasTruncateMarker:!0,authors:[{name:"Nick McLean",title:"Maintainer of The Devoyage",url:"https://medium.com/@thedevoyage",imageURL:"https://cdn-images-1.medium.com/fit/c/63/63/1*TY45PiqMrWiUkivbhmp-Sw.jpeg",key:"nick"}],frontMatter:{title:"Subgraph v0.0.8 - Instant SQL API with Subgraph",slug:"subgraph-v0.0.8-instant-sql-api",authors:["nick"],tags:["subgraph"],date:"2023-05-01T00:00:00.000Z",description:"Create a nearly instant API for your SQL Database with Subgraph v0.0.8.",image:"https://res.cloudinary.com/the-devoyage/image/upload/v1683081810/Subgraph_SQL_kteswo.png",keywords:["graphql","subgraph","api","api generator"]},prevItem:{title:'Three Fancy Bash Directory Jumpers to "Avoid The Path"',permalink:"/blog/fancy-bash-directory-jumpers"},nextItem:{title:"Subgraph v0.0.7 - Instant Chat GPT GraphQL API",permalink:"/blog/subgraph-v0.0.7-http-with-chat-gpt"}},u={authorsImageUrls:[void 0]},p=[{value:"Build a Quick API for your SQL Database",id:"build-a-quick-api-for-your-sql-database",level:2},{value:"1. Create the Database",id:"1-create-the-database",level:3},{value:"2. Write the Subgraph Config",id:"2-write-the-subgraph-config",level:3},{value:"3. Start the API",id:"3-start-the-api",level:3},{value:"4. Query the API",id:"4-query-the-api",level:3},{value:"Subgraph v0.0.8",id:"subgraph-v008",level:2}],c={toc:p};function d(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Hello All, Thanks for Joining!"),(0,r.kt)("p",null,"Today we are creating instant APIs around SQL Databases of various dialects with Subgraph, a proof\nof concept tool that is made to assist speedy API development."),(0,r.kt)("p",null,"All it takes to use subgraph is a config file that informs the service where your data is and what your data looks like. Define the\nconfig and start the API to create an instant API around your database."),(0,r.kt)("p",null,"With the latest release, v0.0.8, we are taking a look at the newly added support for a few dialects of SQL. In addition to\nMongo and HTTP Data Sources, Subgraph now supports Postgres, MySQL, and SqLite. Let's take a minute and spin up a new\nAPI from scratch!"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://res.cloudinary.com/the-devoyage/image/upload/v1683081810/Subgraph_SQL_kteswo.png",alt:"Subgraph SQL"})),(0,r.kt)("p",null,"Check out the ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/the-devoyage/subgrpah"},"repo"),"!"),(0,r.kt)("h2",{id:"build-a-quick-api-for-your-sql-database"},"Build a Quick API for your SQL Database"),(0,r.kt)("p",null,"The goal with subgraph is pretty simple - Shorten the time it takes to plan, develop, and deploy an API. With subgraph,\nwe do not need to write routes, controllers, or resolvers from scratch. We do not need to deal with boiler plate, database\nconnections, or even validation."),(0,r.kt)("p",null,"All we need to do is tell the Subgraph service where our data is and what it looks like. Subgraph takes care of the rest by\nconnecting to the database and creating the routes/resolvers. With this, you now can spend your time on the parts of\nyour business that might make a larger impact for your clients and sales."),(0,r.kt)("p",null,"Let's see an example!"),(0,r.kt)("h3",{id:"1-create-the-database"},"1. Create the Database"),(0,r.kt)("p",null,"You own the database. You get to choose what type of database is best suited for your project. As mentioned above,\nSubgraph supports Mongo, Postgres, MySQL, and SqLite databases, making it easy for you to connect to your data."),(0,r.kt)("p",null,"In this example we will create a SqLite DB and use Subgraph to generate an API around a few tables. Keep in mind, that connecting Subgraph\nto MySQL, Postgres, or even Mongo, is a very similar process."),(0,r.kt)("p",null,"First, make sure you have SqLite installed on your system. The following guide is going to assume you are on a Linux machine."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install sqlite3\n")),(0,r.kt)("p",null,"Creating a SqLite Database is as easy as creating a file in a folder. Let's create a database around Coffees!"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"touch caffeine.db\n")),(0,r.kt)("p",null,"Now, let's create a couple tables."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE coffee (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL,\n  price INTEGER NOT NULL,\n  available BOOLEAN NOT NULL\n);\n\nCREATE TABLE espresso (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL,\n  price INTEGER NOT NULL,\n  available BOOLEAN NOT NULL\n);\n")),(0,r.kt)("p",null,"This is all we will need to do to get started. We can now move on to Subgraph specific setup."),(0,r.kt)("h3",{id:"2-write-the-subgraph-config"},"2. Write the Subgraph Config"),(0,r.kt)("p",null,"The config is all about your data. It tells Subgraph where to find your data and what it looks like. Writing the config file is\neasy, as it uses ",(0,r.kt)("a",{parentName:"p",href:"https://toml.io/en/"},"TOML or Tom's Obvious Minimal Language"),"."),(0,r.kt)("p",null,"Let's start by telling Subgraph where the data is. To do this, add a ",(0,r.kt)("inlineCode",{parentName:"p"},"Data Source")," to the configuration. You can add\nmultiple data sources, mix and match data sources, or just keep it basic with a single data source."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[service]\nservice_name = "espresso"\n\n[[service.data_sources]]\n[service.data_sources.SQL]\nname = "caffeine_data_source" # Name the data source for reference later.\nuri = "sqlite:/home/nickisyourfan/Desktop/DEV/dbs/caffeine.db"\ndialect = "SQLITE"\n')),(0,r.kt)("p",null,"Now that Subgraph knows where the data is, we can inform subgraph what our data looks like. Start by defining an entity for each table. An\nEntity is a table in the database (collection for Mongo)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[[service.entities]]\nname = "Espresso"\n')),(0,r.kt)("p",null,"In this case, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Espresso")," table has four columns. Let's tell Subgraph."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[[service.entities.fields]]\nname = "id"\nscalar = "Int"\nrequired = true\nexclude_from_input = ["CreateOne", "UpdateOne", "UpdateMany"] # Don\'t allow uses to create or update the ID prop.\n\n[[service.entities.fields]]\nname = "name"\nscalar = "String"\nrequired = true\n\n[[service.entities.fields]]\nname = "price"\nscalar = "Int"\nrequired = true\n\n[[service.entities.fields]]\nname = "available"\nscalar = "Boolean"\nrequired = true\n')),(0,r.kt)("p",null,"That's it! Let's do the same for the coffee table and take a look at the finished config."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'# The Finished Configuration:\n[service]\nservice_name = "espresso"\n\n[[service.data_sources]]\n[service.data_sources.SQL]\nname = "caffeine_data_source"\nuri = "sqlite:/home/nickisyourfan/Desktop/DEV/dbs/caffeine.db"\ndialect = "SQLITE"\n\n[[service.entities]]\nname = "Coffee"\n[[service.entities.fields]]\nname = "id"\nscalar= "Int"\nrequired = true\nexclude_from_input = ["CreateOne", "UpdateOne", "UpdateMany"]\n[[service.entities.fields]]\nname = "name"\nscalar = "String"\nrequired = true\n[[service.entities.fields]]\nname = "price"\nscalar = "Int"\nrequired = true\n[[service.entities.fields]]\nname = "available"\nscalar = "Boolean"\nrequired = true\n\n[[service.entities]]\nname = "Espresso"\n[[service.entities.fields]]\nname = "id"\nscalar = "Int"\nrequired = true\nexclude_from_input = ["CreateOne", "UpdateOne", "UpdateMany"]\n[[service.entities.fields]]\nname = "name"\nscalar = "String"\nrequired = true\n[[service.entities.fields]]\nname = "price"\nscalar = "Int"\nrequired = true\n[[service.entities.fields]]\nname = "available"\nscalar = "Boolean"\nrequired = true\n')),(0,r.kt)("h3",{id:"3-start-the-api"},"3. Start the API"),(0,r.kt)("p",null,"In the previous step, we defined a Subgraph Configuration that tells the service about the data. The hard part is done in\nabout 50 lines of code. Now, let's start the service."),(0,r.kt)("p",null,"First, make sure you downloaded the latest release (v0.0.8). The release is a binary, making it easy to run on a linux system.\nJust make sure to give it execution permissions."),(0,r.kt)("p",null,"Checkout the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/The-Devoyage/subgraph/releases"},"releases")," page on GitHub to download the binary."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"chmod +x subgraph\n")),(0,r.kt)("p",null,"Then, run subgraph and point it to your config file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./subgraph --config ./caffeine.toml --port 3030\n")),(0,r.kt)("p",null,"And that's it! Your new API is now running at the port specified. We can load up the playground and send some queries."),(0,r.kt)("h3",{id:"4-query-the-api"},"4. Query the API"),(0,r.kt)("p",null,"Load the playground at the specified port. The playground will let you construct and execute queries against your new API."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# Navigate In Browser:\nhttp://localhost:3030\n")),(0,r.kt)("p",null,"Once loaded, drop in a mutation to insert a new espresso into the espresso table."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},'mutation createEspresso($input: create_espresso_input!) {\n  create_espresso(create_espresso_input: $input) {\n    id\n    name\n    price\n    available\n  }\n}\n\n{\n  "input": {\n    "name": "Katz Coffee",\n    "price": 15,\n    "available": true\n  }\n}\n')),(0,r.kt)("p",null,"Subgraph creates resolvers for each entity, making it easy for you to query the database. Currently, Subgraph supports\nFind One, Find Many, Update One, Update Many, and Create One resolvers. Delete operations coming soon!"),(0,r.kt)("h2",{id:"subgraph-v008"},"Subgraph v0.0.8"),(0,r.kt)("p",null,"Thanks for checking in on the progress. There is a lot of work to do in order to get to v1, a production ready environment!"),(0,r.kt)("p",null,"If you are a curios rusteacean and want to jump in, please feel free to check out the ",(0,r.kt)("a",{parentName:"p",href:"https://www.github.com/the-devoyage/subgraph"},"source code"),",\nand share your ideas about the future of the project."),(0,r.kt)("p",null,"Upcoming projects include Delete Operations, Authorization Support, Testing Integrations, Federation 2 Support, and Error Handling! Thanks\nfor keeping tuned and following along."),(0,r.kt)(o.U,{mdxType:"BlogFooter"}))}d.isMDXComponent=!0}}]);