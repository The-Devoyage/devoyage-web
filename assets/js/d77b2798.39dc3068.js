"use strict";(self.webpackChunkdevoyage_web=self.webpackChunkdevoyage_web||[]).push([[3596],{3905:(e,r,t)=>{t.d(r,{Zo:()=>c,kt:()=>g});var n=t(7294);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=n.createContext({}),u=function(e){var r=n.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},c=function(e){var r=u(e.components);return n.createElement(l.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},p=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(t),g=a,f=p["".concat(l,".").concat(g)]||p[g]||d[g]||i;return t?n.createElement(f,s(s({ref:r},c),{},{components:t})):n.createElement(f,s({ref:r},c))}));function g(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var i=t.length,s=new Array(i);s[0]=p;var o={};for(var l in r)hasOwnProperty.call(r,l)&&(o[l]=r[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var u=2;u<i;u++)s[u]=t[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},1231:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var n=t(7462),a=(t(7294),t(3905));const i={id:"guard-basics",title:"Guard Basics"},s=void 0,o={unversionedId:"guards/guard-basics",id:"guards/guard-basics",title:"Guard Basics",description:"Fine Grained Access Control",source:"@site/subgraph/07-guards/01-guard-basics.md",sourceDirName:"07-guards",slug:"/guards/guard-basics",permalink:"/subgraph/guards/guard-basics",draft:!1,editUrl:"https://www.github.com/The-Devoyage/devoyage-web/blob/master/subgraph/07-guards/01-guard-basics.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"guard-basics",title:"Guard Basics"},sidebar:"subgraphSidebar",previous:{title:"Guards",permalink:"/subgraph/category/guards"},next:{title:"Guard Name",permalink:"/subgraph/guards/guard-name"}},l={},u=[{value:"Fine Grained Access Control",id:"fine-grained-access-control",level:2},{value:"The Request Lifecycle and Guards",id:"the-request-lifecycle-and-guards",level:2},{value:"Service Guards",id:"service-guards",level:3},{value:"Entity Guards",id:"entity-guards",level:3},{value:"Resolver Guards",id:"resolver-guards",level:3},{value:"Field Guards",id:"field-guards",level:3}],c={toc:u};function d(e){let{components:r,...t}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,t,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"fine-grained-access-control"},"Fine Grained Access Control"),(0,a.kt)("p",null,"Guards empower you to establish rules that control access based on custom conditions. At its core,\na guard is a boolean expression. If the expression evaluates to a truthy condition, the request is denied."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-toml"},"[[service.guards]]\n# Register a guard name.\nname = \"require_user\"\n\n# Define the boolean expression.\nif_expr = '''\n  len(context(\"user.id\")) == 0\n'''\n\n# Provide an error message.\nthen_msg = \"You must be logged in to perform this action.\"\n")),(0,a.kt)("p",null,"In the provided example, the guard checks the length of the user ID in the context. If the length is 0,\nthe expression evaluates to true, blocking the request."),(0,a.kt)("p",null,"Guards exhibit exceptional versatility and can be invoked at various points during the request lifecycle."),(0,a.kt)("h2",{id:"the-request-lifecycle-and-guards"},"The Request Lifecycle and Guards"),(0,a.kt)("p",null,"A request undergoes guarding at multiple stages of resolution, enabling you to position guards according to the desired level of restriction."),(0,a.kt)("p",null,"Guards placed early in the request lifecycle imply a broader, more global restriction, while those invoked\nlater are employed for finer-grained restrictions."),(0,a.kt)("h3",{id:"service-guards"},"Service Guards"),(0,a.kt)("p",null,"Service Guards take the lead in evaluation and enforcement, making them valuable for implementing global access restrictions."),(0,a.kt)("h3",{id:"entity-guards"},"Entity Guards"),(0,a.kt)("p",null,"Entity Guards, specific to an entity, are applied universally across resolver types. This allows for the application of generalized guards for actions such as finding, creating, and updating."),(0,a.kt)("h3",{id:"resolver-guards"},"Resolver Guards"),(0,a.kt)("p",null,"Resolver Guards are evaluated based on resolver types, enabling access restrictions tailored to specific actions, such as creating, finding, or updating."),(0,a.kt)("h3",{id:"field-guards"},"Field Guards"),(0,a.kt)("p",null,"Field Guards come into play when the client requests a field in the selection set while creating the query or mutation. They are useful for implementing guards based on whether a client requests specific fields."))}d.isMDXComponent=!0}}]);