"use strict";(self.webpackChunkdevoyage_web=self.webpackChunkdevoyage_web||[]).push([[1185],{1571:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>d,toc:()=>l});var n=s(4848),i=s(8453);const t={id:"guard-basics",title:"Guard Basics"},a=void 0,d={id:"guards/guard-basics",title:"Guard Basics",description:"Fine Grained Access Control",source:"@site/subgraph/07-guards/01-guard-basics.md",sourceDirName:"07-guards",slug:"/guards/guard-basics",permalink:"/subgraph/guards/guard-basics",draft:!1,unlisted:!1,editUrl:"https://www.github.com/The-Devoyage/devoyage-web/blob/master/subgraph/07-guards/01-guard-basics.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"guard-basics",title:"Guard Basics"},sidebar:"subgraphSidebar",previous:{title:"Guards",permalink:"/subgraph/category/guards"},next:{title:"Guard Name",permalink:"/subgraph/guards/guard-name"}},o={},l=[{value:"Fine Grained Access Control",id:"fine-grained-access-control",level:2},{value:"The Request Lifecycle and Guards",id:"the-request-lifecycle-and-guards",level:2},{value:"Service Guards",id:"service-guards",level:3},{value:"Entity Guards",id:"entity-guards",level:3},{value:"Resolver Guards",id:"resolver-guards",level:3},{value:"Field Guards",id:"field-guards",level:3}];function c(e){const r={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"fine-grained-access-control",children:"Fine Grained Access Control"}),"\n",(0,n.jsx)(r.p,{children:"Guards empower you to establish rules that control access based on custom conditions. At its core,\na guard is a boolean expression. If the expression evaluates to a truthy condition, the request is denied."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-toml",children:"[[service.guards]]\n# Register a guard name.\nname = \"require_user\"\n\n# Define the boolean expression.\nif_expr = '''\n  len(context(\"user.id\")) == 0\n'''\n\n# Provide an error message.\nthen_msg = \"You must be logged in to perform this action.\"\n"})}),"\n",(0,n.jsx)(r.p,{children:"In the provided example, the guard checks the length of the user ID in the context. If the length is 0,\nthe expression evaluates to true, blocking the request."}),"\n",(0,n.jsx)(r.p,{children:"Guards exhibit exceptional versatility and can be invoked at various points during the request lifecycle."}),"\n",(0,n.jsx)(r.h2,{id:"the-request-lifecycle-and-guards",children:"The Request Lifecycle and Guards"}),"\n",(0,n.jsx)(r.p,{children:"A request undergoes guarding at multiple stages of resolution, enabling you to position guards according to the desired level of restriction."}),"\n",(0,n.jsx)(r.p,{children:"Guards placed early in the request lifecycle imply a broader, more global restriction, while those invoked\nlater are employed for finer-grained restrictions."}),"\n",(0,n.jsx)(r.h3,{id:"service-guards",children:"Service Guards"}),"\n",(0,n.jsx)(r.p,{children:"Service Guards take the lead in evaluation and enforcement, making them valuable for implementing global access restrictions."}),"\n",(0,n.jsx)(r.h3,{id:"entity-guards",children:"Entity Guards"}),"\n",(0,n.jsx)(r.p,{children:"Entity Guards, specific to an entity, are applied universally across resolver types. This allows for the application of generalized guards for actions such as finding, creating, and updating."}),"\n",(0,n.jsx)(r.h3,{id:"resolver-guards",children:"Resolver Guards"}),"\n",(0,n.jsx)(r.p,{children:"Resolver Guards are evaluated based on resolver types, enabling access restrictions tailored to specific actions, such as creating, finding, or updating."}),"\n",(0,n.jsx)(r.h3,{id:"field-guards",children:"Field Guards"}),"\n",(0,n.jsx)(r.p,{children:"Field Guards come into play when the client requests a field in the selection set while creating the query or mutation. They are useful for implementing guards based on whether a client requests specific fields."})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>d});var n=s(6540);const i={},t=n.createContext(i);function a(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);